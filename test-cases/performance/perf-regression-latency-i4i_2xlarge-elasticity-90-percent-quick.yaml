test_duration: 3000
pre_create_schema: true
#pre_create_keyspace: [
#  "CREATE KEYSPACE IF NOT EXISTS keyspace1 WITH REPLICATION = {'class' : 'NetworkTopologyStrategy', 'replication_factor': 3 };",
#  "CREATE TABLE IF NOT EXISTS keyspace1.standard1 (key blob PRIMARY KEY, \"C0\" blob, \"C1\" blob, \"C2\" blob, \"C3\" blob, \"C4\" blob, \"C5\" blob, \"C6\" blob, \"C7\" blob) WITH  tablets = {'expected_data_size_in_gb': 10, 'min_per_shard_tablet_count': 64, 'min_tablet_count': 64};"
#]
pre_create_keyspace: [
  "CREATE KEYSPACE IF NOT EXISTS keyspace1 WITH REPLICATION = {'class' : 'NetworkTopologyStrategy', 'replication_factor': 3 };",
  "CREATE TABLE IF NOT EXISTS keyspace1.standard1 (key blob PRIMARY KEY, \"C0\" blob, \"C1\" blob, \"C2\" blob, \"C3\" blob, \"C4\" blob, \"C5\" blob, \"C6\" blob, \"C7\" blob) WITH  tablets = {'min_tablet_count': 256};"
]
prepare_write_cmd: [
    "cassandra-stress write no-warmup cl=ALL n=7864320 -schema 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate threads=200 -col 'size=FIXED(128) n=FIXED(8)' -pop seq=1..7864320",    
    "cassandra-stress write no-warmup cl=ALL n=7864320 -schema 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate threads=200 -col 'size=FIXED(128) n=FIXED(8)' -pop seq=7864321..15728640",    
    "cassandra-stress write no-warmup cl=ALL n=7864320 -schema 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate threads=200 -col 'size=FIXED(128) n=FIXED(8)' -pop seq=15728641..23592960",  
   "cassandra-stress write no-warmup cl=ALL n=7864320 -schema keyspace=ks_drop 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate threads=200 -col 'size=FIXED(128) n=FIXED(8)' -pop seq=23592961..31457280"
]
      
stress_cmd_w: "cassandra-stress write no-warmup cl=ALL n=7864320 -schema 'keyspace=refill_keyspace replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate threads=300 -col 'size=FIXED(128) n=FIXED(8)' -pop seq=31457281..39321600"
stress_cmd_r: "cassandra-stress mixed no-warmup cl=QUORUM duration=20m -schema 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate 'threads=300 fixed=16875/s' -col 'size=FIXED(128) n=FIXED(8)' -pop 'dist=gauss(1..31457280,15728640,314572)'"
stress_cmd_m: "cassandra-stress mixed no-warmup cl=QUORUM duration=20m -schema 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate 'threads=300 fixed=16875/s' -col 'size=FIXED(128) n=FIXED(8)' -pop 'dist=gauss(1..31457280,15728640,314572)'"
stress_cmd: "cassandra-stress mixed no-warmup cl=QUORUM duration=20m -schema 'replication(strategy=NetworkTopologyStrategy,replication_factor=3)' -mode cql3 native -rate 'threads=300 fixed=16875/s' -col 'size=FIXED(128) n=FIXED(8)' -pop 'dist=gauss(1..31457280,15728640,314572)'"

simulated_racks: 3
n_db_nodes: 3
n_loaders: 4
n_monitor_nodes: 1

instance_type_loader: 'c6i.2xlarge'
instance_type_monitor: 't3.large'
instance_type_db: 'i4i.2xlarge'

nemesis_class_name: 'FullStorageUtilizationNemesis'
nemesis_sequence_sleep_between_ops: 10
nemesis_add_node_cnt: 3
nemesis_grow_shrink_instance_type: 'i4i.2xlarge'

user_prefix: 'elasticity-test'

round_robin: true
append_scylla_args: '--blocked-reactor-notify-ms 5 --abort-on-lsa-bad-alloc 1 --abort-on-seastar-bad-alloc --abort-on-internal-error 1 --abort-on-ebadf 1'
backtrace_decoding: false
print_kernel_callstack: true

store_perf_results: true
use_hdrhistogram: true
email_recipients: ["lakshmipathi.ganapathi@scylladb.com"]
email_subject_postfix: 'fullstorage utilization test'
parallel_node_operations: true

append_scylla_yaml:
  enable_tablets: true
  auto_snapshot: false

